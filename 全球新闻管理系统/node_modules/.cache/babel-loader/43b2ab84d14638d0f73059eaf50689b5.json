{"ast":null,"code":"var _jsxFileName = \"/Users/anxiaojie/Desktop/blog/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Navbar from \"./components/partials/Navbar\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Register from \"./components/forms/Register\";\nimport Login from \"./components/forms/Login\";\nimport Post from \"./components/Post\";\nimport jwt_decode from \"jwt-decode\";\nimport AddPost from \"./components/forms/AddPost\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [token, setToken] = useState(\"\");\n  const [userData, setUserData] = useState({});\n  const [posts, setPosts] = useState([]);\n\n  let getPosts = () => {\n    fetch(\"http://localhost:5000/posts\").then(res => res.json()).then(data => setPosts(data));\n  };\n\n  useEffect(() => {\n    getPosts();\n  }, []);\n  let showPosts = posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n    data: post,\n    getPosts: getPosts\n  }, post._id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 35\n  }, this));\n\n  let handleLogin = data => {\n    let decoded = jwt_decode(data);\n    setToken(data);\n    setUserData(jwt_decode(data));\n    localStorage.setItem('userData', JSON.stringify(decoded));\n    localStorage.setItem('token', data);\n  };\n\n  let handleLogout = () => {\n    setToken();\n    setUserData({});\n    localStorage.removeItem('token');\n    localStorage.removeItem('userData');\n  }; // console.log(token)\n  // console.log(userData)\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      handleLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), token && userData || localStorage.hasOwnProperty('token') && localStorage.hasOwnProperty('userData') ? /*#__PURE__*/_jsxDEV(AddPost, {\n      getPosts: getPosts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 10\n    }, this) : null, /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: showPosts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/register\",\n        element: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: /*#__PURE__*/_jsxDEV(Login, {\n          handleLogin: handleLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"13zvL6DPa2thZE0ir9zZ2WqBBaM=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/anxiaojie/Desktop/blog/client/src/App.js"],"names":["React","useEffect","useState","Navbar","Routes","Route","Register","Login","Post","jwt_decode","AddPost","App","token","setToken","userData","setUserData","posts","setPosts","getPosts","fetch","then","res","json","data","showPosts","map","post","_id","handleLogin","decoded","localStorage","setItem","JSON","stringify","handleLogout","removeItem","hasOwnProperty"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,kBAA9B;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AAEA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,OAAP,MAAoB,4BAApB;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,EAAD,CAAlC;;AAEA,MAAIgB,QAAQ,GAAG,MAAM;AACnBC,IAAAA,KAAK,CAAC,6BAAD,CAAL,CACCC,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEMG,IAAI,IAAIN,QAAQ,CAACM,IAAD,CAFtB;AAGD,GAJD;;AAMAtB,EAAAA,SAAS,CAAE,MAAM;AACfiB,IAAAA,QAAQ;AACT,GAFQ,EAEN,EAFM,CAAT;AAIF,MAAIM,SAAS,GAAGR,KAAK,CAACS,GAAN,CAAUC,IAAI,iBAAI,QAAC,IAAD;AAAqB,IAAA,IAAI,EAAEA,IAA3B;AAAiC,IAAA,QAAQ,EAAER;AAA3C,KAAWQ,IAAI,CAACC,GAAhB;AAAA;AAAA;AAAA;AAAA,UAAlB,CAAhB;;AAEA,MAAIC,WAAW,GAAIL,IAAD,IAAU;AAC1B,QAAIM,OAAO,GAAGpB,UAAU,CAACc,IAAD,CAAxB;AACAV,IAAAA,QAAQ,CAACU,IAAD,CAAR;AAEAR,IAAAA,WAAW,CAACN,UAAU,CAACc,IAAD,CAAX,CAAX;AAEAO,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAeJ,OAAf,CAAjC;AACAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BR,IAA9B;AACD,GARD;;AAUA,MAAIW,YAAY,GAAG,MAAM;AACvBrB,IAAAA,QAAQ;AACRE,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAe,IAAAA,YAAY,CAACK,UAAb,CAAwB,OAAxB;AACAL,IAAAA,YAAY,CAACK,UAAb,CAAwB,UAAxB;AACD,GALD,CA3Be,CAkCf;AACA;;;AAEE,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,4BACE,QAAC,MAAD;AAAQ,MAAA,YAAY,EAAED;AAAtB;AAAA;AAAA;AAAA;AAAA,YADF,EAEKtB,KAAK,IAAIE,QAAV,IAAwBgB,YAAY,CAACM,cAAb,CAA4B,OAA5B,KAAwCN,YAAY,CAACM,cAAb,CAA4B,UAA5B,CAAhE,gBACC,QAAC,OAAD;AAAS,MAAA,QAAQ,EAAElB;AAAnB;AAAA;AAAA;AAAA;AAAA,YADD,GACkC,IAHtC,eAKE,QAAC,MAAD;AAAA,8BACE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,GAAZ;AAAgB,QAAA,OAAO,EAAEM;AAAzB;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,WAAZ;AAAwB,QAAA,OAAO,eAAE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAjC;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,OAAO,eAAE,QAAC,KAAD;AAAO,UAAA,WAAW,EAAEI;AAApB;AAAA;AAAA;AAAA;AAAA;AAA9B;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA,YALF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAaD;;GAlDQjB,G;;KAAAA,G;AAoDT,eAAeA,GAAf","sourcesContent":["import React, {useEffect, useState} from \"react\"\nimport Navbar from \"./components/partials/Navbar\"\nimport { Routes, Route } from \"react-router-dom\"\nimport Register from \"./components/forms/Register\"\nimport Login from \"./components/forms/Login\"\n\nimport Post from \"./components/Post\"\nimport jwt_decode from \"jwt-decode\"\nimport AddPost from \"./components/forms/AddPost\"\n\nfunction App() {\n  const [token, setToken] = useState(\"\")\n  const [userData, setUserData] = useState({})\n  const [posts, setPosts] = useState([])\n\n  let getPosts = () => {\n    fetch(\"http://localhost:5000/posts\")\n    .then(res => res.json())\n    .then(data => setPosts(data))\n  }\n\n  useEffect( () => {\n    getPosts()\n  }, [])\n\nlet showPosts = posts.map(post => <Post key={post._id} data={post} getPosts={getPosts}/>)\n\nlet handleLogin = (data) => {\n  let decoded = jwt_decode(data)\n  setToken(data)\n\n  setUserData(jwt_decode(data))\n\n  localStorage.setItem('userData', JSON.stringify(decoded))\n  localStorage.setItem('token', data)\n}\n\nlet handleLogout = () => {\n  setToken()\n  setUserData({})\n  localStorage.removeItem('token')\n  localStorage.removeItem('userData')\n}\n\n// console.log(token)\n// console.log(userData)\n\n  return (\n    <div className=\"App\">\n      <Navbar handleLogout={handleLogout}/>\n      { (token && userData) || (localStorage.hasOwnProperty('token') && localStorage.hasOwnProperty('userData'))\n       ? <AddPost getPosts={getPosts}/> : null \n       } \n      <Routes>\n        <Route path=\"/\" element={showPosts} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route path=\"/login\" element={<Login handleLogin={handleLogin}/>} />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}